{"remainingRequest":"/Users/tobeysimpson/my-gridsome-site/node_modules/babel-loader/lib/index.js??ref--1-1!/Users/tobeysimpson/my-gridsome-site/node_modules/gridsome/app/page-query/fetch.js","dependencies":[{"path":"/Users/tobeysimpson/my-gridsome-site/node_modules/gridsome/app/page-query/fetch.js","mtime":1554172634699},{"path":"/Users/tobeysimpson/my-gridsome-site/node_modules/cache-loader/dist/cjs.js","mtime":1554172634942},{"path":"/Users/tobeysimpson/my-gridsome-site/node_modules/babel-loader/lib/index.js","mtime":1553985690434}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _JSON$stringify from \"/Users/tobeysimpson/my-gridsome-site/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Promise from \"/Users/tobeysimpson/my-gridsome-site/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport _objectSpread from \"/Users/tobeysimpson/my-gridsome-site/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/Users/tobeysimpson/my-gridsome-site/node_modules/@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\n\n/* global GRIDSOME_MODE, GRIDSOME_DATA_DIR */\nimport router from '../router';\nimport { setResults } from './shared';\nimport { unslash } from '../utils/helpers';\nexport default (function (route, query) {\n  if (GRIDSOME_MODE === 'serve') {\n    var _route$params = route.params,\n        page = _route$params.page,\n        params = _objectWithoutProperties(_route$params, [\"page\"]);\n\n    var _router$resolve = router.resolve(_objectSpread({}, route, {\n      params: params\n    })),\n        location = _router$resolve.location;\n\n    return new _Promise(function (resolve, reject) {\n      fetch(process.env.GRAPHQL_ENDPOINT, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: _JSON$stringify({\n          variables: {\n            page: page ? Number(page) : null,\n            path: location.path || route.path\n          },\n          query: query\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        if (res.errors) reject(res.errors[0]);else setResults(route.path, res.data) && resolve(res);\n      }).catch(function (err) {\n        reject(err);\n      });\n    });\n  } else if (GRIDSOME_MODE === 'static') {\n    return new _Promise(function (resolve, reject) {\n      var name = route.name,\n          isIndex = route.meta.isIndex;\n      var path = unslash(name === '*' ? '404' : route.path);\n      var jsonPath = unslash(isIndex === false ? \"\".concat(path, \".json\") : \"\".concat(path, \"/index.json\"));\n      import(\n      /* webpackChunkName: \"data/\" */\n      \"\".concat(GRIDSOME_DATA_DIR, \"/\").concat(jsonPath)).then(function (res) {\n        if (res.errors) reject(res.errors[0]);else setResults(route.path, res.data), resolve(res);\n      }).catch(function (err) {\n        reject(err);\n      });\n    });\n  }\n});",null]}