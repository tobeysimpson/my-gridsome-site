{"remainingRequest":"/Users/tobeysimpson/my-gridsome-site/node_modules/babel-loader/lib/index.js??ref--1-1!/Users/tobeysimpson/my-gridsome-site/node_modules/gridsome/app/directives/link.js","dependencies":[{"path":"/Users/tobeysimpson/my-gridsome-site/node_modules/gridsome/app/directives/link.js","mtime":1554172634699},{"path":"/Users/tobeysimpson/my-gridsome-site/node_modules/cache-loader/dist/cjs.js","mtime":1554172634942},{"path":"/Users/tobeysimpson/my-gridsome-site/node_modules/babel-loader/lib/index.js","mtime":1553985690434}],"contextDependencies":[],"result":["import router from '../router';\nimport caniuse from '../utils/caniuse';\nimport { stripPathPrefix } from '../utils/helpers';\nimport { createObserver } from '../utils/intersectionObserver';\nvar isPreloaded = {};\nvar observer = caniuse.IntersectionObserver ? createObserver(intersectionHandler) : null;\nexport default {\n  inserted: function inserted(el) {\n    observer && observer.observe(el);\n  },\n  unbind: function unbind(el) {\n    observer && observer.unobserve(el);\n  }\n};\n\nfunction intersectionHandler(_ref) {\n  var intersectionRatio = _ref.intersectionRatio,\n      target = _ref.target;\n\n  if (process.isClient) {\n    if (intersectionRatio > 0) {\n      observer.unobserve(target);\n\n      if (document.location.hostname === target.hostname) {\n        if (isPreloaded[target.pathname]) return;else isPreloaded[target.pathname] = true;\n        var path = stripPathPrefix(target.pathname);\n\n        var _router$resolve = router.resolve({\n          path: path\n        }),\n            route = _router$resolve.route;\n\n        var options = route.matched[0].components.default;\n        if (route.meta.isStatic) return;\n\n        var fetchComponentData = function fetchComponentData(options) {\n          setTimeout(function () {\n            import(\n            /* webpackChunkName: \"page-query\" */\n            '../page-query/fetch').then(function (m) {\n              m.default(route, options.__pageQuery);\n            });\n          }, 250);\n        };\n\n        if (typeof options === 'function') {\n          options().then(function (m) {\n            return fetchComponentData(m.default);\n          });\n        } else {\n          fetchComponentData(options);\n        }\n      }\n    }\n  }\n}",null]}