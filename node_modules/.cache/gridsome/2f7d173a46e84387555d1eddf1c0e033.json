{"remainingRequest":"/Users/tobeysimpson/my-gridsome-site/node_modules/babel-loader/lib/index.js??ref--1-1!/Users/tobeysimpson/my-gridsome-site/node_modules/gridsome/app/directives/image.js","dependencies":[{"path":"/Users/tobeysimpson/my-gridsome-site/node_modules/gridsome/app/directives/image.js","mtime":1554172634699},{"path":"/Users/tobeysimpson/my-gridsome-site/node_modules/cache-loader/dist/cjs.js","mtime":1554172634942},{"path":"/Users/tobeysimpson/my-gridsome-site/node_modules/babel-loader/lib/index.js","mtime":1553985690434}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.ends-with\";\nimport _Array$from from \"/Users/tobeysimpson/my-gridsome-site/node_modules/@babel/runtime-corejs2/core-js/array/from\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nimport caniuse from '../utils/caniuse';\nimport { createObserver } from '../utils/intersectionObserver';\nvar observer = caniuse.IntersectionObserver ? createObserver(intersectionHandler) : null;\nexport default {\n  inserted: function inserted(el) {\n    observe(el);\n  },\n  update: function update(el) {\n    observe(el);\n  },\n  unbind: function unbind(el) {\n    unobserve(el);\n  }\n};\n\nfunction intersectionHandler(_ref) {\n  var intersectionRatio = _ref.intersectionRatio,\n      target = _ref.target;\n\n  if (intersectionRatio > 0) {\n    observer.unobserve(target);\n    loadImage(target);\n  }\n}\n\nfunction observe(el) {\n  if (el.tagName !== 'IMG') {\n    observeHtml(el);\n  } else {\n    if (!observer) loadImage(el);else observer.observe(el);\n  }\n}\n\nfunction unobserve(el) {\n  if (el.tagName !== 'IMG') {\n    unobserveHtml(el);\n  } else if (observer) {\n    observer.unobserve(el);\n  }\n}\n\nfunction observeHtml() {\n  var context = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n  var images = context.querySelectorAll('[data-src]');\n\n  if (observer) {\n    images.forEach(function (el) {\n      return !el.__vue__ && observer.observe(el);\n    });\n  } else {\n    _Array$from(images).forEach(function (el) {\n      return !el.__vue__ && loadImage(el);\n    });\n  }\n}\n\nfunction unobserveHtml() {\n  var context = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n\n  if (observer) {\n    context.querySelectorAll('[data-src]').forEach(function (el) {\n      if (!el.__vue__) observer.unobserve(el);\n    });\n  }\n}\n\nfunction loadImage(el) {\n  var src = el.getAttribute('data-src');\n  var sizes = el.getAttribute('data-sizes');\n  var srcset = el.getAttribute('data-srcset');\n\n  if (!src || el.src.endsWith(src)) {\n    return; // src is already switched\n  }\n\n  var image = new Image();\n\n  image.onload = function () {\n    el.classList.remove('g-image--loading');\n    el.classList.add('g-image--loaded');\n    el.src = src;\n    el.sizes = sizes;\n    el.srcset = srcset;\n  };\n\n  image.src = src;\n  el.classList.add('g-image--loading');\n  el.classList.remove('g-image--loaded');\n}",{"version":3,"sources":["/Users/tobeysimpson/my-gridsome-site/node_modules/gridsome/app/directives/image.js"],"names":["caniuse","createObserver","observer","IntersectionObserver","intersectionHandler","inserted","el","observe","update","unbind","unobserve","intersectionRatio","target","loadImage","tagName","observeHtml","unobserveHtml","context","document","images","querySelectorAll","forEach","__vue__","src","getAttribute","sizes","srcset","endsWith","image","Image","onload","classList","remove","add"],"mappings":"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","sourcesContent":["import caniuse from '../utils/caniuse'\nimport { createObserver } from '../utils/intersectionObserver'\n\nconst observer = caniuse.IntersectionObserver\n  ? createObserver(intersectionHandler)\n  : null\n\nexport default {\n  inserted (el) {\n    observe(el)\n  },\n  update (el) {\n    observe(el)\n  },\n  unbind (el) {\n    unobserve(el)\n  }\n}\n\nfunction intersectionHandler ({ intersectionRatio, target }) {\n  if (intersectionRatio > 0) {\n    observer.unobserve(target)\n    loadImage(target)\n  }\n}\n\nfunction observe (el) {\n  if (el.tagName !== 'IMG') {\n    observeHtml(el)\n  } else {\n    if (!observer) loadImage(el)\n    else observer.observe(el)\n  }\n}\n\nfunction unobserve (el) {\n  if (el.tagName !== 'IMG') {\n    unobserveHtml(el)\n  } else if (observer) {\n    observer.unobserve(el)\n  }\n}\n\nfunction observeHtml (context = document) {\n  const images = context.querySelectorAll('[data-src]')\n\n  if (observer) {\n    images.forEach(el => !el.__vue__ && observer.observe(el))\n  } else {\n    Array.from(images).forEach(el => !el.__vue__ && loadImage(el))\n  }\n}\n\nfunction unobserveHtml (context = document) {\n  if (observer) {\n    context.querySelectorAll('[data-src]').forEach(el => {\n      if (!el.__vue__) observer.unobserve(el)\n    })\n  }\n}\n\nfunction loadImage (el) {\n  const src = el.getAttribute('data-src')\n  const sizes = el.getAttribute('data-sizes')\n  const srcset = el.getAttribute('data-srcset')\n\n  if (!src || el.src.endsWith(src)) {\n    return // src is already switched\n  }\n\n  const image = new Image()\n\n  image.onload = function () {\n    el.classList.remove('g-image--loading')\n    el.classList.add('g-image--loaded')\n    \n    el.src = src\n    el.sizes = sizes\n    el.srcset = srcset\n  }\n\n  image.src = src\n\n  el.classList.add('g-image--loading')\n  el.classList.remove('g-image--loaded')\n}\n"]}]}